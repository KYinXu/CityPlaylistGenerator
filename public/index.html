<!--Track what users are listening to at locations-->
<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" href="styles.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
        <script src="dependencies.js"></script>
        <script src="get-token.js"></script>
    </head>
 
    <body>
        <div class="container-fluid px-0">
            <div id="map"></div>
            <div class="fixed-top">
                <div class="text-center py-3 px-1" style="margin-left: 30%; margin-right: 30%" id="locationBorder">
                    <h2>Current Location: <span id="countyname">Orange County</span></h2>
                </div>
                <div class="position-absolute" style="left: 75px; top: 20px">
                    <button class="clear p-0 shadow-none" onclick="showHint('hint-bound')">
                        <svg id="hint" class="mx-0 px-0" xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 384 512" fill="rgba(0, 0, 0, 0.7)"><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2l0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4l0 0c19.8 27.1 39.7 54.4 49.2 86.2H272zM192 512c44.2 0 80-35.8 80-80V416H112v16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/></svg>
                    </button>
                </div>
                <div class="position-absolute" id="hint-bound" style="left: 65px; top: 70px; visibility: hidden;">
                    <div id="hint-label" class="px-3 pt-2" style="width: 40%">
                        <h4>Info</h4>
                        <p>Click a point on the map to access the curated 
                            sountrack of that region.</p>
                    </div>
                </div>
                <div class="position-absolute" id="displaycounty">

                </div>
                <!--
                <div class="position-absolute" style="right: 20px; top: 20px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="rgba(0, 0, 0, 0.7)" class="bi bi-list" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
                        </svg>
                </div>
                -->
            </div>
            
            <div class="d-flex justify-content-center w-100 h-25 fixed-bottom p-0" id="buttonBorder">
                <div class="d-flex flex-row justify-content-center w-100 m-0">
                    <a id="openplaylist" class="btn btn-primary my-2 mx-1 primaryBtn shadow-none" type = "button" href="" onclick="" >Open Playlist</a>
                    <!-- <form id="formcreateplaylist" action="/create_playlist?userid=xt6ngdtgaxqk1ptjz400k3lgb&name=City Track: Orange County" method="POST">
                        <input class="btn btn-primary my-2 mx-1 primaryBtn shadow-none" id="addButton" type = "submit" value="Add Song"></input>
                    </form> -->
                    <!-- href="/login"-->
                    <a id="addsong" class="btn btn-primary my-2 mx-1 primaryBtn shadow-none" type = "button" href="#" onclick="addSongs('Orange')">Add Song</a>
                    <a id="discoverlocation" class="btn btn-primary my-2 mx-1 primaryBtn shadow-none" type = "button" href="#" onclick="">Discover Location</a>
                </div>
            </div>
            
            
            <div class="modal fade w-100" id="welcome"  aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content" id="welcome-display">
                    <div class="modal-header" style="border: none;">
                      <h1 class="modal-title" id="exampleModalLabel">City Soundtracks</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Listen and contribute to the soundtrack of your region!
                         Simply select a county, and instantly generate a curated 
                         Spotify playlist tailored to its unique musical tastes. 
                         Add and upvote songs to enhance the communal playlist, 
                         shaping the ultimate local music experience.
                    </div>
                    <div class="modal-footer justify-content-center px-2" style="border: none;">
                      <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">Continue</button>
                    </div>
                  </div>
                </div>
              </div>

            <div class="modal fade" id="countyModal" tabindex="-1" aria-labelledby="countyModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content" id="welcome-display">
                    <div class="modal-header" style="border: none;">
                      <h5 class="modal-title" style="color: white;"id="countyModalLabel"><span id="countyName2">Orange County</span></h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" style="border: none;">
                      <iframe src="https://open.spotify.com/embed/playlist/0SKIbslGIuG4cNNBbYNcBV" width="100%" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
                        <p id="countyInfo"></p>
                    </div>
                    <div class="modal-footer">
                      <a type="button" class="btn btn-secondary" id="loginButton" style="display: none;" href="/login">Log In</a>
                      <button type="button" class="btn btn-success" onclick="createPlaylist()">Add Playlist</button>
                      <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>

        </div>
        <script src="maps-api-call.js"></script>
        <script src="spotify-api-updater.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>
</html>